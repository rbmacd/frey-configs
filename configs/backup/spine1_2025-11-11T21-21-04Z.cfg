! Command: show running-config
! device: spine1 (cEOSLab, EOS-4.34.2.1F-43868243.43421F (engineering build))
!
no aaa root
!
username admin privilege 15 role network-admin secret sha512 $6$wI/1gZmxd5NNx0tI$vFwxFGzNYqKapXy5Pjf4wYmFX2mXb58fFa3hRF3KWyAUQXtpeZHfFs8kMrCCzWIB6VjXSqMKX8tUKNWbJyDqQ.
!
no service interface inactive port-id allocation disabled
!
transceiver qsfp default-mode 4x10G
!
service routing protocols model multi-agent
!
logging buffered 10000
logging host 10.0.0.200
!
hostname spine1
ip name-server vrf default 10.0.0.50
ip name-server vrf default 10.0.0.51
!
spanning-tree mode mstp
!
system l1
   unsupported speed action error
   unsupported error-correction action error
!
vlan 10
   name VLAN10
!
vlan 20
   name VLAN20
!
vlan 30
   name VLAN30
!
banner motd
*****************************************
* Unauthorized access is prohibited
* All activity is logged and monitored
*****************************************
EOF
!
aaa authorization exec default local
!
interface Ethernet1
   description to_leaf1
   no switchport
   ip address 10.0.0.0/31
!
interface Ethernet2
   description to_leaf2
   no switchport
   ip address 10.0.1.0/31
!
interface Loopback0
   description BGP Router ID
   ip address 10.255.255.1/32
!
interface Management0
   description Management Interface
   ip address 172.20.20.2/24
!
ip routing
!
ip route 0.0.0.0/0 172.20.20.1
!
ntp server 10.0.0.100
ntp server 10.0.0.101
!
router bgp 65000
   router-id 10.255.255.1
   no bgp default ipv4-unicast
   maximum-paths 4 ecmp 4
   neighbor EVPN_OVERLAY peer group
   neighbor EVPN_OVERLAY next-hop-unchanged
   neighbor EVPN_OVERLAY update-source Loopback0
   neighbor EVPN_OVERLAY ebgp-multihop 2
   neighbor EVPN_OVERLAY send-community extended
   neighbor SPINE_UNDERLAY peer group
   neighbor SPINE_UNDERLAY send-community extended
   neighbor 10.0.0.1 peer group SPINE_UNDERLAY
   neighbor 10.0.0.1 remote-as 65100
   neighbor 10.0.0.1 description leaf1
   neighbor 10.0.1.1 peer group SPINE_UNDERLAY
   neighbor 10.0.1.1 remote-as 65101
   neighbor 10.0.1.1 description leaf2
   neighbor 10.255.254.101 peer group EVPN_OVERLAY
   neighbor 10.255.254.101 remote-as 65100
   neighbor 10.255.254.102 peer group EVPN_OVERLAY
   neighbor 10.255.254.102 remote-as 65101
   !
   address-family evpn
      neighbor 10.255.254.101 activate
      neighbor 10.255.254.101 encapsulation vxlan 
      neighbor 10.255.254.102 activate
      neighbor 10.255.254.102 encapsulation vxlan 
   !
   address-family ipv4
      neighbor SPINE_UNDERLAY activate
      no neighbor 10.255.254.101 activate
      network 10.255.255.1/32
!
router multicast
   ipv4
      software-forwarding kernel
   !
   ipv6
      software-forwarding kernel
!
end